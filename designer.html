<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Card Designer</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Dancing+Script:wght@400;700&family=Roboto:wght@400;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800&family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
:root { --font-main: 'Plus Jakarta Sans', sans-serif; }
html[lang="ar"] { --font-main: 'Cairo', sans-serif; }

body {
  font-family: var(--font-main);
  background-color: #0f172a;
  user-select: none;
}

#canvas-container {
  width: 500px;
  height: 667px;
  background: white;
  position: relative;
}

/* ===============================
   EDITABLE ELEMENTS
================================ */
.editable-element {
  position: absolute;
  cursor: move;
  border: 2px dashed transparent;
  transform: translateZ(0); /* prevents blur */
}

.editable-element.selected {
  border-color: #8B5CF6;
}

/* ===============================
   ðŸ”¥ ICON FIX (IMPORTANT)
================================ */
.icon-wrapper {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.icon-wrapper svg {
  width: 48px;     /* FIXED PIXELS */
  height: 48px;
  display: block;
  fill: currentColor;
  shape-rendering: geometricPrecision;
  -webkit-font-smoothing: antialiased;
  pointer-events: none;
}
</style>
</head>

<body class="text-gray-200 flex flex-col h-screen overflow-hidden">

<main class="flex-1 flex items-center justify-center">
  <div id="canvas-container"></div>
</main>

<script type="module">
/* ===============================
   ADD ICON (CRISP SVG)
================================ */
function addIcon(svgMarkup) {
  const el = document.createElement('div');
  el.className = 'editable-element icon-wrapper';
  el.style.left = '200px';
  el.style.top = '300px';
  el.style.color = '#000';

  el.innerHTML = svgMarkup;

  document.getElementById('canvas-container').appendChild(el);
}

/* ===============================
   TEST ICON (SHARP)
================================ */
addIcon(`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
  <path d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/>
</svg>
`);

/* ===============================
   EXPORT FIX (RETINA)
================================ */
async function exportImage() {
  const canvas = await html2canvas(
    document.getElementById('canvas-container'),
    {
      scale: 2,           // ðŸ”¥ CRITICAL FIX
      useCORS: true,
      backgroundColor: null
    }
  );
  document.body.appendChild(canvas);
}
</script>

</body>
</html>
